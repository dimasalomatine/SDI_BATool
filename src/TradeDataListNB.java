import java.awt.Component;
import java.sql.*;
/*
 * TradeDataListNB.java
 *
 * Created on March 31, 2007, 9:37 PM
 */

/**
 *
 * @author  Dmitry
 */
public class TradeDataListNB extends javax.swing.JPanel
{

    private int curentloadedstock;
    
    /** Creates new form TradeDataListNB */
    public TradeDataListNB ()
    {
        initComponents ();
        String timgdir = BursaAnalizer_Frame.getImgDir();
        /*Graph = new JButton(Name.Graph,
                            new ImageIcon(timgdir + "exchange.png"));
        Func2 = new JButton(Name.Func2,
                            new ImageIcon(timgdir + "index_add.png"));
       */     
        tdltp.tdlt.setFatherLabels(lblName,lblSymbol);
              
        initTableControlPanel();
      
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        Graph = new javax.swing.JButton();
        tdltp = new TradeDataListTablePanel();
        tcp = new TableControlPanelNB();
        jPanel1 = new javax.swing.JPanel();
        lblName = new javax.swing.JLabel();
        lblSymbol = new javax.swing.JLabel();

        Graph.setText("Graph");
        Graph.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                GraphActionPerformed(evt);
            }
        });

        tdltp.setPreferredSize(new java.awt.Dimension(684, 506));

        lblName.setText(" ");

        lblSymbol.setText(" ");

        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(lblSymbol, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 187, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(lblName, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 195, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(236, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel1Layout.createSequentialGroup()
                .add(19, 19, 19)
                .add(lblSymbol)
                .add(26, 26, 26)
                .add(lblName)
                .addContainerGap(27, Short.MAX_VALUE))
        );

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(tcp, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(tdltp, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .add(35, 35, 35)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(Graph, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 135, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(22, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                    .add(tcp, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(Graph, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 38, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .add(33, 33, 33)
                        .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(layout.createSequentialGroup()
                        .add(18, 18, 18)
                        .add(tdltp, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 598, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(36, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void GraphActionPerformed (java.awt.event.ActionEvent evt)//GEN-FIRST:event_GraphActionPerformed
    {//GEN-HEADEREND:event_GraphActionPerformed
    BursaAnalizer_Frame.getStockGraphInstance().setDataPoints(
                lblName.getText(), tdltp.tdlt.atd);
            BursaAnalizer_Frame.switchToTab("Graph");
    }//GEN-LAST:event_GraphActionPerformed
    
    public void initOnData(int idstock) {
        curentloadedstock=idstock;
        tdltp.tdlt.fetchdata(0);
        tdltp.tdlt.fetchdata(curentloadedstock);
    }
    public void reInitOnData() {
        initOnData(curentloadedstock);
    }
    public java.util.List getTradeDataList() {
        return tdltp.tdlt.atd;
    }
    public void initTableControlPanel() {
            boolean flag=false;
            boolean privilegies[] =
                BursaAnalizer_Frame.getCurentUserPrivilegies();

            if ((privilegies[BursaAnalizer_Frame.CAN_ADD_REC] == true)
                    || (privilegies[BursaAnalizer_Frame.CAN_DEL_REC]
                        == true) || (privilegies[BursaAnalizer_Frame.CAN_UPD_REC]
                                     == true)) 
            {
                    Component []tc=this.getComponents();
                    
                    for(int i=0;i<tc.length;i++)
                    {
                     String s=tc[i].getName();
                     if(s!=null && true==s.equalsIgnoreCase("TableControlPanelNB"))
                     {
                        tcp.initSTDButtons(tdltp.tdlt,privilegies[BursaAnalizer_Frame.CAN_ADD_REC],
			privilegies[BursaAnalizer_Frame.CAN_DEL_REC],
			privilegies[BursaAnalizer_Frame.CAN_UPD_REC]);
                        flag=true;
                        break;
                     }
                    }
            }
            tcp.setVisible (flag);
 
        }
        
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton Graph;
    private javax.swing.JPanel jPanel1;
    public javax.swing.JLabel lblName;
    public javax.swing.JLabel lblSymbol;
    private TableControlPanelNB tcp;
    private TradeDataListTablePanel tdltp;
    // End of variables declaration//GEN-END:variables
    
}
